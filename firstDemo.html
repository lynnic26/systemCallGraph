<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>A D3 DEMO</title>

	
	<style>
        body {
        	margin: 0;
        	width: 100%;
        }
        .systemGraph {
        	width: 100%;
        	height: 2000px;
        	position: relative;
        }
        #mainCanvas {
        	border: 1px solid red;
        	position: absolute;
        	top: 0;
        	left: 50%;
        	transform: translateX(-50%);
        }
	</style>
</head>
<body>
    <div class="systemGraph">	
	    <svg id="mainCanvas" width="1000" height="1000" >
			
		</svg>
    </div>
	<script src="d3.js"></script>
	<script>
		var width = 280;	
		var height = 150;	
		var rectHeight = 40;
		var rectWidth = 40;	
		             
		var dataSchema = [
		    {
                instances: [{
			           w: 25     
					}, {
			           w: 25
					}, {
			           w: 25
					}, { 
			           w: 25
					}, {
					   w: 25
					}, {
					   w: 25
					}
                ],
                sysName: 'RIS.RAPP PO'
            },{
                instances: [{
			           w: 25     
					}, {
			           w: 25
					}, {
			           w: 25
					}, { 
			           w: 25
					}, {
					   w: 25
					}, {
					   w: 25
					}
                ],
                sysName: 'RIS.RAPP P1'
            }
		];
        
        var mainSvg = d3.select('#mainCanvas');

        var systemSvg = d3.select('#mainCanvas')
                         .selectAll('svg')
                         .data(dataSchema)
                         .enter()
                         .append('svg')
                         .attr('x', function(system, i) {
                             return i * width;
                         })
                         .attr('y', function(system, i) {
                         	 return 0;
                         })
                         .attr('width', width)
                         .attr('height', height)
                         .style('background-color', '#f5f5f5');

        systemSvg.append('text')
                   .attr('x', 10)
                   .attr('y', 20)
                   .text(function(system, i) {
                       return system.sysName
                   });         

        systemSvg.selectAll('rect')
                         .data(function(system, i) {
                            return system.instances
                         })
                         .enter()
                         .append('rect')
                         .attr('y', 30)
						 .attr('x', function(d, i){
								return 20 + i * rectWidth;
						 })
						 .attr('width', rectWidth - 15)
						 .attr('height',rectHeight - 15)
						 .attr('fill','steelblue')
						 .on('click', function(instance, i) {
						 	 alert(instance.w);
						 })
						 .on('mouseover', function(){
				            d3.select(this)
				                .attr('fill','yellow');
				         })
				         .on('mouseout', function(){
				            d3.select(this)
				                .transition()
				                .duration(500)
				                .attr('fill','steelblue');
				         });


		
		var defs = mainSvg.append("defs");

		var arrowMarker = defs.append("marker")
								.attr("id","arrow")
								.attr("markerUnits","strokeWidth")
							    .attr("markerWidth","12")
		                        .attr("markerHeight","12")
		                        .attr("viewBox","0 0 12 12") 
		                        .attr("refX","6")
		                        .attr("refY","6")
		                        .attr("orient","auto");

		var arrow_path = "M2,2 L10,6 L2,10 L6,6 L2,2";
								
		arrowMarker.append("path")
					.attr("d",arrow_path)
					.attr("fill","#000");

		var line = mainSvg.append("line")
					 .attr("x1",0)
					 .attr("y1",0)
					 .attr("x2",200)
					 .attr("y2",50)
					 .attr("stroke","red")
					 .attr("stroke-width",2)
					 .attr("marker-end","url(#arrow)");


	</script> 

</body>
</html>